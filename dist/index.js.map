{
  "version": 3,
  "sources": ["../lib/main.js", "../lib/index.js"],
  "sourcesContent": ["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*\n*\n* ## Notice\n*\n* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/12.2.0/lib/msun/src/e_log2.c}. The implementation follows the original, but has been modified for JavaScript.\n*\n* ```text\n* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.\n*\n* Developed at SunPro, a Sun Microsystems, Inc. business.\n* Permission to use, copy, modify, and distribute this\n* software is freely granted, provided that this notice\n* is preserved.\n* ```\n*/\n\n'use strict';\n\n// MODULES //\n\nvar getHighWord = require( '@stdlib/number-float64-base-get-high-word' );\nvar setHighWord = require( '@stdlib/number-float64-base-set-high-word' );\nvar setLowWord = require( '@stdlib/number-float64-base-set-low-word' );\nvar toWords = require( '@stdlib/number-float64-base-to-words' );\nvar isnan = require( '@stdlib/math-base-assert-is-nan' );\nvar ABS_MASK = require( '@stdlib/constants-float64-high-word-abs-mask' );\nvar HIGH_SIGNIFICAND_MASK = require( '@stdlib/constants-float64-high-word-significand-mask' );\nvar BIAS = require( '@stdlib/constants-float64-exponent-bias' );\nvar NINF = require( '@stdlib/constants-float64-ninf' );\nvar kernelLog1p = require( '@stdlib/math-base-special-kernel-log1p' );\n\n\n// VARIABLES //\n\nvar TWO54 = 1.80143985094819840000e+16;   // 0x43500000, 0x00000000\nvar IVLN2HI = 1.44269504072144627571e+00; // 0x3ff71547, 0x65200000\nvar IVLN2LO = 1.67517131648865118353e-10; // 0x3de705fc, 0x2eefa200\n\n// 0x7ff00000 = 2146435072 => 0 11111111111 00000000000000000000 => biased exponent: 2047 = 1023+1023 => 2^1023\nvar HIGH_MAX_NORMAL_EXP = 0x7ff00000|0; // asm type annotation\n\n// 0x00100000 = 1048576 => 0 00000000001 00000000000000000000 => biased exponent: 1 = -1022+1023 => 2^-1022\nvar HIGH_MIN_NORMAL_EXP = 0x00100000|0; // asm type annotation\n\n// 0x3ff00000 = 1072693248 => 0 01111111111 00000000000000000000 => biased exponent: 1023 = 0+1023 => 2^0 = 1\nvar HIGH_BIASED_EXP_0 = 0x3ff00000|0; // asm type annotation\n\n// High/low words workspace:\nvar WORDS = [ 0|0, 0|0 ];\n\n\n// MAIN //\n\n/**\n* Evaluates the binary logarithm (base two).\n*\n* @param {NonNegativeNumber} x - input value\n* @returns {number} function value\n*\n* @example\n* var v = log2( 4.0 );\n* // returns 2.0\n*\n* @example\n* var v = log2( 8.0 );\n* // returns 3.0\n*\n* @example\n* var v = log2( 0.0 );\n* // returns -Infinity\n*\n* @example\n* var v = log2( Infinity );\n* // returns Infinity\n*\n* @example\n* var v = log2( NaN );\n* // returns NaN\n*\n* @example\n* var v = log2( -4.0 );\n* // returns NaN\n*/\nfunction log2( x ) {\n\tvar valHi;\n\tvar valLo;\n\tvar hfsq;\n\tvar hx;\n\tvar lx;\n\tvar hi;\n\tvar lo;\n\tvar f;\n\tvar R;\n\tvar w;\n\tvar y;\n\tvar i;\n\tvar k;\n\n\tif ( isnan( x ) || x < 0.0 ) {\n\t\treturn NaN;\n\t}\n\ttoWords.assign( x, WORDS, 1, 0 );\n\thx = WORDS[ 0 ];\n\tlx = WORDS[ 1 ];\n\tk = 0|0; // asm type annotation\n\tif ( hx < HIGH_MIN_NORMAL_EXP ) {\n\t\t// Case: x < 2**-1022\n\t\tif ( ( (hx&ABS_MASK) | lx ) === 0 ) {\n\t\t\treturn NINF;\n\t\t}\n\t\tk -= 54|0; // asm type annotation\n\n\t\t// Subnormal number, scale up x:\n\t\tx *= TWO54;\n\t\thx = getHighWord( x );\n\t}\n\tif ( hx >= HIGH_MAX_NORMAL_EXP ) {\n\t\treturn x + x;\n\t}\n\t// Case: log(1) = +0\n\tif ( hx === HIGH_BIASED_EXP_0 && lx === 0 ) {\n\t\treturn 0.0;\n\t}\n\tk += ( (hx>>20) - BIAS )|0; // asm type annotation\n\thx &= HIGH_SIGNIFICAND_MASK;\n\ti = ( ( hx+0x95f64 ) & HIGH_MIN_NORMAL_EXP )|0; // asm type annotation\n\n\t// Normalize x or x/2...\n\tx = setHighWord( x, hx|(i^HIGH_BIASED_EXP_0) );\n\tk += (i>>20)|0; // asm type annotation\n\ty = k;\n\tf = x - 1.0;\n\thfsq = 0.5 * f * f;\n\tR = kernelLog1p( f );\n\n\t/*\n\t* Notes:\n\t*\n\t* -   `f-hfsq` must (for args near `1`) be evaluated in extra precision to avoid a large cancellation when `x` is near `sqrt(2)` or `1/sqrt(2)`.This is fairly efficient since `f-hfsq` only depends on `f`, so can be evaluated in parallel with `R`. Not combining `hfsq` with `R` also keeps `R` small (though not as small as a true `lo` term would be), so that extra precision is not needed for terms involving `R`.\n\t* -   When implemented in C, compiler bugs involving extra precision used to break Dekker's theorem for spitting `f-hfsq` as `hi+lo`. These problems are now automatically avoided as a side effect of the optimization of combining the Dekker splitting step with the clear-low-bits step.\n\t* -   `y` must (for args near `sqrt(2)` and `1/sqrt(2)`) be added in extra precision to avoid a very large cancellation when `x` is very near these values.  Unlike the above cancellations, this problem is specific to base `2`.  It is strange that adding `+-1` is so much harder than adding `+-ln2` or `+-log10_2`.\n\t* -   This implementation uses Dekker's theorem to normalize `y+val_hi`, so, when implemented in C, compiler bugs may reappear in some configurations.\n\t* -   The multi-precision calculations for the multiplications are routine.\n\t*/\n\thi = f - hfsq;\n\thi = setLowWord( hi, 0 );\n\tlo = ( f - hi ) - hfsq + R;\n\tvalHi = hi * IVLN2HI;\n\tvalLo = ( ( lo + hi ) * IVLN2LO ) + ( lo * IVLN2HI );\n\n\tw = y + valHi;\n\tvalLo += ( y - w ) + valHi;\n\tvalHi = w;\n\n\treturn valLo + valHi;\n}\n\n\n// EXPORTS //\n\nmodule.exports = log2;\n", "/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Evaluate the binary logarithm (base two).\n*\n* @module @stdlib/math-base-special-log2\n*\n* @example\n* var log2 = require( '@stdlib/math-base-special-log2' );\n*\n* var v = log2( 4.0 );\n* // returns 2.0\n*\n* v = log2( 8.0 );\n* // returns 3.0\n*\n* v = log2( 0.0 );\n* // returns -Infinity\n*\n* v = log2( Infinity );\n* // returns Infinity\n*\n* v = log2( NaN );\n* // returns NaN\n*\n* v = log2( -4.0 );\n* // returns NaN\n*/\n\n// MODULES //\n\nvar log2 = require( './main.js' );\n\n\n// EXPORTS //\n\nmodule.exports = log2;\n"],
  "mappings": "uGAAA,IAAAA,EAAAC,EAAA,SAAAC,EAAAC,EAAA,cAoCA,IAAIC,EAAc,QAAS,2CAA4C,EACnEC,EAAc,QAAS,2CAA4C,EACnEC,EAAa,QAAS,0CAA2C,EACjEC,EAAU,QAAS,sCAAuC,EAC1DC,EAAQ,QAAS,iCAAkC,EACnDC,EAAW,QAAS,8CAA+C,EACnEC,EAAwB,QAAS,sDAAuD,EACxFC,EAAO,QAAS,yCAA0C,EAC1DC,EAAO,QAAS,gCAAiC,EACjDC,EAAc,QAAS,wCAAyC,EAKhEC,EAAQ,iBACRC,EAAU,mBACVC,EAAU,sBAGVC,EAAsB,WAGtBC,EAAsB,QAGtBC,EAAoB,WAGpBC,EAAQ,CAAE,EAAK,CAAI,EAmCvB,SAASC,EAAMC,EAAI,CAClB,IAAIC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAEJ,GAAK3B,EAAOc,CAAE,GAAKA,EAAI,EACtB,MAAO,KAMR,GAJAf,EAAQ,OAAQe,EAAGF,EAAO,EAAG,CAAE,EAC/BM,EAAKN,EAAO,CAAE,EACdO,EAAKP,EAAO,CAAE,EACde,EAAI,EACCT,EAAKR,EAAsB,CAE/B,GAAQ,EAAAQ,EAAGjB,EAAYkB,GACtB,OAAOf,EAERuB,GAAK,GAGLb,GAAKR,EACLY,EAAKtB,EAAakB,CAAE,CACrB,CACA,OAAKI,GAAMT,EACHK,EAAIA,EAGPI,IAAOP,GAAqBQ,IAAO,EAChC,GAERQ,IAAQT,GAAI,IAAMf,EAAO,EACzBe,GAAMhB,EACNwB,EAAQR,EAAG,OAAYR,EAAsB,EAG7CI,EAAIjB,EAAaiB,EAAGI,EAAIQ,EAAEf,CAAmB,EAC7CgB,GAAMD,GAAG,GAAI,EACbD,EAAIE,EACJL,EAAIR,EAAI,EACRG,EAAO,GAAMK,EAAIA,EACjBC,EAAIlB,EAAaiB,CAAE,EAWnBF,EAAKE,EAAIL,EACTG,EAAKtB,EAAYsB,EAAI,CAAE,EACvBC,EAAOC,EAAIF,EAAOH,EAAOM,EACzBR,EAAQK,EAAKb,EACbS,GAAYK,EAAKD,GAAOZ,EAAca,EAAKd,EAE3CiB,EAAIC,EAAIV,EACRC,GAAWS,EAAID,EAAMT,EACrBA,EAAQS,EAEDR,EAAQD,EAChB,CAKApB,EAAO,QAAUkB,IC/HjB,IAAIe,EAAO,IAKX,OAAO,QAAUA",
  "names": ["require_main", "__commonJSMin", "exports", "module", "getHighWord", "setHighWord", "setLowWord", "toWords", "isnan", "ABS_MASK", "HIGH_SIGNIFICAND_MASK", "BIAS", "NINF", "kernelLog1p", "TWO54", "IVLN2HI", "IVLN2LO", "HIGH_MAX_NORMAL_EXP", "HIGH_MIN_NORMAL_EXP", "HIGH_BIASED_EXP_0", "WORDS", "log2", "x", "valHi", "valLo", "hfsq", "hx", "lx", "hi", "lo", "f", "R", "w", "y", "i", "k", "log2"]
}
